// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model SystemAdmin {
  id           String   @id @default(uuid())
  name         String
  email        String   @unique
  password     String
  title        UserType @relation(fields: [titleName], references: [name])
  titleName    String   @default("system_admin")
  refreshToken String?
}

model PharmacyAdmin {
  id                 String   @id @default(uuid())
  name               String
  email              String   @unique
  password           String
  title              UserType @relation(fields: [titleName], references: [name])
  titleName          String   @default("pharmacy_admin")
  refreshToken       String?
  pharmacy           Pharmacy @relation(fields: [associatedPharmacy], references: [id], onDelete: Cascade)
  associatedPharmacy String
}

model Cachier {
  id           String   @id @default(uuid())
  name         String
  email        String   @unique
  password     String
  title        UserType @relation(fields: [titleName], references: [name])
  titleName    String   @default("cachier")
  refreshToken String?
}

model Customer {
  id           String   @id @default(uuid())
  name         String
  email        String   @unique
  password     String
  title        UserType @relation(fields: [titleName], references: [name])
  titleName    String   @default("customer")
  refreshToken String?
}

model UserType {
  name           String          @id
  description    String?
  SystemAdmins   SystemAdmin[]
  pharmacyAdmins PharmacyAdmin[]
  cachiers       Cachier[]
  customers      Customer[]
}

model Pharmacy {
  id             String          @id @default(uuid())
  name           String          @unique
  email          String          @unique
  phoneNumber    String          @unique
  address        String
  hourly         String
  pharmacyAdmins PharmacyAdmin[]
}

model PharmaceuticalProduct {
  id   String @id @default(uuid())
  name String
}

model Complain {
  id      String @id @default(uuid())
  title   String
  message String
}

// npx prisma migrate dev --name init

// include "pharmacy de garde boolean"
// manage the login with access and refresh tokens on postman so that they can be set automatically damn
// Include pharmacy, pharmacy admin, cachier created by to know who created who
